# AI改善相談機能内容

## 機能概要
製造業の改善活動専門のAI相談機能をアプリに統合し、各社員が個人のメールアドレスでClaude.aiにアクセスできるシステム。

## 現在の実装状況

### 1. 管理者設定機能
- **場所**: チーム選択画面 > 管理者専用設定エリア
- **ボタン**: 🤖 AI設定
- **機能**: Claude APIキーの設定（現在は管理者用）
- **モーダル**: APIキー入力フォーム + 無料枠登録方法の説明

### 2. AI相談タブ
- **場所**: メインアプリ > 🤖 カイゼンAI相談タブ
- **現在の状態**: APIキー設定状況の表示
- **テンプレート**: 改善相談用のテンプレート選択機能
- **入力フォーム**: 相談内容入力エリア
- **送信機能**: Claude API呼び出し（現在の実装）

### 3. 実装済みの修正
- AI相談タブからAPIキー設定ボタンを削除
- 管理者専用エリアにAPIキー設定を移動
- 詳細なデバッグログ追加
- エラーハンドリング強化

## 今後の実装予定

### スマートな Claude.ai 統合
各社員が個人メールアドレスでアクセスできるよう、以下の方式を検討・実装予定：

#### 1. iframe埋め込み方式
```
アプリ内でclaude.aiをiframeで表示
↓
ユーザーが直接アプリ内でClaude操作
↓
別タブに移動不要
```

#### 2. 自動フォーム入力（JavaScript）
```
claude.aiページが読み込まれた後
↓
テンプレート内容を自動でテキストエリアに挿入
↓
ユーザーは送信ボタンを押すだけ
```

#### 3. URLパラメータ利用
```
相談内容をURLパラメータに含める
↓
claude.ai側で自動読み込み（対応していれば）
```

## 技術的課題
- claude.aiがiframe埋め込みを許可しているか
- CORS（クロスオリジン）制限
- claude.aiのDOM構造へのアクセス可能性

## 設計方針
1. **個人アカウント活用**: 各社員が自分のメールアドレスでClaude.aiにアクセス
2. **管理者設定不要**: APIキー設定なしで利用可能
3. **アプリ内完結**: 外部タブへの移動を最小限に
4. **テンプレート活用**: 改善活動に特化したテンプレート提供

## 期待される効果
- 各社員のクレジットカード情報不要
- 無料でのAI相談機能利用
- 管理者の負担軽減
- セキュリティリスクの最小化